# 📊 Git报告生成技能

欢迎使用 Git报告生成技能！这个技能能够智能分析你的Git提交日志，生成简洁明了的工作日报和周报，帮助你快速了解开发进展和关键工作成果。

## 🚀 快速开始

### 安装技能

#### 全局安装（推荐）
```bash
cp -r templates/.claude/skills/git-report ~/.claude/skills/
```

#### 项目级别安装
```bash
mkdir -p .claude/skills
cp -r templates/.claude/skills/git-report .claude/skills/
```

### 基本使用

#### 生成昨天的日报
```bash
claude "生成昨天的日报"
```

#### 生成上周的周报
```bash
claude "生成上周的周报"
```

#### 生成指定日期的报告
```bash
claude "生成2025-10-30的日报"
```

#### 生成报告并发送到企微机器人
```bash
claude "生成上周的周报并发送到企微机器人"
```

## 📋 功能特性

### 📊 双模式支持
- **日报模式**：智能计算上一个工作日，自动处理周末情况
- **周报模式**：智能计算上周日期范围（周一至周五）
- **智能回溯**：如果目标日期无提交，自动回溯查找有提交的工作日

### 🎯 智能分析
- **自动识别**：智能识别功能开发、问题修复、代码优化等不同类型的工作
- **重要性评估**：自动评估提交的重要性和影响范围
- **数据量化**：统计代码变更、问题修复等量化指标

### 📊 简洁输出
- **3-4行描述**：每行聚焦一个主要工作项
- **专业语言**：使用清晰、专业的表达方式
- **数据支撑**：附带代码统计、问题修复数量等量化数据

### 🔧 灵活配置
- **日期范围**：支持指定任意日期或日期范围
- **输出格式**：提供标准和简洁两种输出格式
- **内容筛选**：可指定关注的工作类型

### 📤 企微机器人集成
- **自动发送**：支持将报告自动发送到企业微信机器人
- **环境配置**：通过 `WECHAT_WEBHOOK_URL` 环境变量配置
- **格式适配**：自动适配企微机器人的消息格式

## 🛠️ 企微机器人配置

### 创建企微机器人
1. 打开企业微信，进入目标群聊
2. 点击右上角群聊设置
3. 选择"群机器人"
4. 点击"添加机器人"
5. 设置机器人名称（如："日报机器人"）
6. 复制生成的Webhook URL

### 配置环境变量
```bash
# 临时设置（当前会话有效）
export WECHAT_WEBHOOK_URL="https://qyapi.weixin.qq.com/cgi-bin/webhook/send?key=YOUR_KEY_HERE"

# 永久设置（添加到shell配置文件）
echo 'export WECHAT_WEBHOOK_URL="https://qyapi.weixin.qq.com/cgi-bin/webhook/send?key=YOUR_KEY_HERE"' >> ~/.zshrc
source ~/.zshrc
```

### 验证配置
```bash
# 检查环境变量是否设置
echo $WECHAT_WEBHOOK_URL

# 发送测试消息
curl -H "Content-Type: application/json" \
     -d '{
       "msgtype": "text",
       "text": {
         "content": "企微机器人配置测试成功！"
       }
     }' \
     "$WECHAT_WEBHOOK_URL"
```

## 📝 使用示例

### 示例1：标准日报
```bash
claude "生成昨天的日报"
```

**输出示例**：
```
## 📅 工作日报 - 2025-10-30

- 完成了用户认证模块的核心开发，涉及5个提交，新增320行代码
- 修复了登录页面表单验证相关的bug，共修复3个问题，优化了用户体验
- 优化了数据库查询性能，修改150行代码，提升了API响应速度30%
- 更新了API文档，完善了认证接口的使用说明和示例
```

### 示例2：标准周报
```bash
claude "生成上周的周报"
```

**输出示例**：
```
## 📊 工作周报 - 2025-10-27 至 2025-10-31

### 本周工作概览
- **总提交数**：15个提交
- **功能开发**：8个功能提交
- **问题修复**：4个问题修复
- **代码优化**：3个优化提交

### 主要工作成果
- 完成了用户认证模块的开发，涉及5个提交，新增320行代码
- 重点修复了登录表单验证相关bug，共修复3个问题
- 优化了数据库查询性能，修改150行代码
- 完善了API文档体系，提升了项目质量

### 下周工作计划
- 继续推进用户管理模块的开发
- 优化系统性能相关功能
- 完善测试覆盖和文档
```

### 示例3：企微机器人发送
```bash
claude "生成昨天的工作日报并发送到企微机器人"
```

**企微消息格式**：
```markdown
## 📅 工作日报 - 2025-10-30

**项目**: claude-init
**日期**: 2025-10-30

### 今日工作摘要
- 完成了用户认证模块的核心开发
- 修复了登录页面表单验证问题
- 优化了数据库查询性能

### 提交统计
- **总提交数**: 5
- **功能开发**: 3
- **问题修复**: 1
- **代码优化**: 1

---
🤖 由 Claude Code 自动生成
```

### 示例4：多日分析
```bash
claude "分析过去三天的提交并生成摘要"
```

### 示例5：特定类型关注
```bash
claude "只关注功能开发和bug修复的日报"
```


## 🛠️ 故障排除

### 技能没有被激活
- **问题**：发出请求后，Claude没有使用daily-report技能
- **解决方案**：
  - 确认技能已正确安装
  - 使用更明确的请求，如"使用daily-report技能生成日报"
  - 检查技能描述是否匹配你的请求

### 没有找到提交记录
- **问题**：技能运行但提示没有找到提交记录
- **解决方案**：
  - 确认指定的日期范围内有提交
  - 检查Git仓库状态和提交历史
  - 验证日期格式是否正确

### 企微机器人发送失败
- **问题**：日报生成成功但发送到企微机器人失败
- **解决方案**：
  - 检查 `WECHAT_WEBHOOK_URL` 环境变量是否设置
  - 验证Webhook URL格式是否正确
  - 检查网络连接和防火墙设置
  - 确认机器人没有被禁用

### 输出不符合预期
- **问题**：日报内容不够准确或完整
- **解决方案**：
  - 提供更具体的需求描述
  - 指定关注的工作类型
  - 要求特定的输出格式

## 🔧 高级配置

### 多环境配置
如果你有多个环境，可以设置不同的环境变量：

```bash
# 开发环境
export WECHAT_WEBHOOK_DEV="dev_webhook_url"

# 生产环境
export WECHAT_WEBHOOK_PROD="prod_webhook_url"

# 在脚本中选择使用哪个
export WECHAT_WEBHOOK_URL="$WECHAT_WEBHOOK_DEV"
```

### 安全注意事项
- **Webhook URL保护**：不要将Webhook URL提交到版本控制
- **消息内容安全**：日报内容不包含敏感信息，避免泄露代码细节


## 🔄 更新和维护

### 检查技能版本
```bash
ls ~/.claude/skills/git-report/
```

### 更新技能
```bash
cp -r templates/.claude/skills/git-report ~/.claude/skills/
```

### 反馈和建议
如果你对这个技能有任何反馈或建议，欢迎在项目仓库中提交Issue或Discussion。

---

**开始使用Git报告生成技能，让你的工作成果一目了然！** 🚀

*最后更新: 2025-11-03*